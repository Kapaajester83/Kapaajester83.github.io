<!DOCTYPE html>
<html lang="en-US">

<head>
  <link rel="icon" type="image/png" sizes="48x48" href="../../../favicon.ico">
  <link rel="shortcut icon" href="../../../favicon.ico">
  <title>Hack The Box | Linux Fundamentals</title>
  <meta name="author" content="Kappa">
  <meta name="description" content="Splash">
  <meta name="viewport" content="width=device-width">
  <link href='https://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Orbitron:500' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Rochester' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../../labs.css" type="text/css">
</head>

<body>

  <!--   _  __          _____  _____        
 | |/ /    /\   |  __ \|  __ \ /\    
 | ' /    /  \  | |__) | |__) /  \   
 |  <    / /\ \ |  ___/|  ___/ /\ \  
 | . \  / ____ \| |    | |  / ____ \ 
 |_|\_\/_/    \_\_|    |_| /_/    \_\
 -->

  <div id="page">
    <div id="nav">
      <ul>
        <li><a href="https://kapaajester83.github.io/">Home</a></li>
        <li><a href="https://kapaajester83.github.io/labs/contents.html">Labs</a></li>
        <li><a href="https://duckduckgo.com/" target="_blank">DuckGo</a></li>
        <li><a href="https://github.com/Kapaajester83?tab=repositories" target="_blank">About</a></li>
        <li><a href="mailto:kappajester83@gmail.com" target="_blank">Email</a></li>
      </ul>
    </div>
    <div id="logo">
      <img src="https://kapaajester83.github.io/logo.jpeg" alt="logo">
      <h1>Kappa</h1>

      <div>
        <br>
        <br>
        <br>
        <h2>“Great things are not done by impulse, but by a series of small things brought together.”</h2>
        <br>
        <br>
      </div>

    </div>

    <div>
      <div id="writeup">
        <h3>
          <a href="../../contents.html">Hack The Box</a>
        </h3>
        <hr>

        <div id="labs-table-top">
          <h4><a href="../linuxFundamentals.htm">Linux Fundamentals</a></h4>
          <ul>
            <li><a href="redirection.htm">File Description and Redirection</a></li>
            <li><a href="filterContents.htm"><b><em>~ Filter Contents</em></b></a></li>
            <li><a href="regularExpressions.htm">Regular Expressions</a></li>
          </ul>
        </div>
        <hr>

        <div>

          <h3><em>Filter Contents</em></h3>

          <p>In the last section, we learned about the redirections we can use to redirect results from one program to another for processing. To read files, we do not necessarily have to use an editor for that. There are two tools called more and less, which are very identical. These are fundamental pagers that allow us to scroll through the file in an interactive view. Let us have a look at some examples.</p>

          <h4>More</h4>

          <h5>kalijester68@htb[/htb]$ more /etc/passwd</h5>

          <p>After we read the content using cat and redirected it to more, the already mentioned pager opens, and we will automatically start at the beginning of the file.</p>

          <h5>
            root:x:0:0:root:/root:/bin/bash<br>
            daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin<br>
            bin:x:2:2:bin:/bin:/usr/sbin/nologin<br>
            sys:x:3:3:sys:/dev:/usr/sbin/nologin<br>
            sync:x:4:65534:sync:/bin:/bin/sync<br>
            --More--
          </h5>

          <p>With the [Q] key, we can leave this pager. We will notice that the output remains in the terminal.</p>

          <h4>Less</h4>

          <p>If we now take a look at the tool less, we will notice on the man page that it contains many more features than more.</p>

          <h5>kalijester68@htb[/htb]$ less /etc/passwd</h5>

          <p>The presentation is almost the same as with more.</p>

          <h5>
            root:x:0:0:root:/root:/bin/bash<br>
            daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin<br>
            bin:x:2:2:bin:/bin:/usr/sbin/nologin<br>
            sys:x:3:3:sys:/dev:/usr/sbin/nologin<br>
            sync:x:4:65534:sync:/bin:/bin/sync<br>
            :
          </h5>

          <p>When closing less with the [Q] key, we will notice that the output we have seen, unlike more, does not remain in the terminal.</p>

          <h4>Head</h4>

          <p>Sometimes we will only be interested in specific issues either at the beginning of the file or the end. If we only want to get the first lines of the file, we can use the tool head. By default, head prints the first ten lines of the given file or input, if not specified otherwise.</p>

          <h5>
            kalijester68@htb[/htb]$ head /etc/passwd<br>
            <br>
            root:x:0:0:root:/root:/bin/bash<br>
            daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin<br>
            bin:x:2:2:bin:/bin:/usr/sbin/nologin<br>
            sys:x:3:3:sys:/dev:/usr/sbin/nologin<br>
            sync:x:4:65534:sync:/bin:/bin/sync<br>
            games:x:5:60:games:/usr/games:/usr/sbin/nologin<br>
            man:x:6:12:man:/var/cache/man:/usr/sbin/nologin<br>
            lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin<br>
            mail:x:8:8:mail:/var/mail:/usr/sbin/nologin<br>
            news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
          </h5>

          <h4>Tail</h4>

          <p>If we only want to see the last parts of a file or results, we can use the counterpart of head called tail, which returns the last ten lines.</p>

          <h5>
            kalijester68@htb[/htb]$ tail /etc/passwd<br>
            <br>
            miredo:x:115:65534::/var/run/miredo:/usr/sbin/nologin<br>
            usbmux:x:116:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin<br>
            rtkit:x:117:119:RealtimeKit,,,:/proc:/usr/sbin/nologin<br>
            nm-openvpn:x:118:120:NetworkManager OpenVPN,,,:/var/lib/openvpn/chroot:/usr/sbin/nologin<br>
            nm-openconnect:x:119:121:NetworkManager OpenConnect plugin,,,:/var/lib/NetworkManager:/usr/sbin/nologin<br>
            pulse:x:120:122:PulseAudio daemon,,,:/var/run/pulse:/usr/sbin/nologin<br>
            beef-xss:x:121:124::/var/lib/beef-xss:/usr/sbin/nologin<br>
            lightdm:x:122:125:Light Display Manager:/var/lib/lightdm:/bin/false<br>
            do-agent:x:998:998::/home/do-agent:/bin/false<br>
            user6:x:1000:1000:,,,:/home/user6:/bin/bash
          </h5>

          <h4>Sort</h4>

          <p>Depending on which results and files are dealt with, they are rarely sorted. Often it is necessary to sort the desired results alphabetically or numerically to get a better overview. For this, we can use a tool called sort.</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | sort<br>
            <br>
            _apt:x:104:65534::/nonexistent:/usr/sbin/nologin<br>
            backup:x:34:34:backup:/var/backups:/usr/sbin/nologin<br>
            bin:x:2:2:bin:/bin:/usr/sbin/nologin<br>
            cry0l1t3:x:1001:1001::/home/cry0l1t3:/bin/bash<br>
            daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin<br>
            dnsmasq:x:107:65534:dnsmasq,,,:/var/lib/misc:/usr/sbin/nologin<br>
            dovecot:x:114:117:Dovecot mail server,,,:/usr/lib/dovecot:/usr/sbin/nologin<br>
            dovenull:x:115:118:Dovecot login user,,,:/nonexistent:/usr/sbin/nologin<br>
            ftp:x:113:65534::/srv/ftp:/usr/sbin/nologin<br>
            games:x:5:60:games:/usr/games:/usr/sbin/nologin<br>
            gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin<br>
            htb-student:x:1002:1002::/home/htb-student:/bin/bash
          </h5>

          <p>As we can see now, the output no longer starts with root but is now sorted alphabetically.</p>

          <h4>Grep</h4>

          <p>More often, we will only search for specific results that contain patterns we have defined. One of the most used tools for this is grep, which offers many different features. Accordingly, we can search for users who have the default shell "/bin/bash" set as an example.</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep "/bin/bash"<br>
            <br>
            root:x:0:0:root:/root:/bin/bash<br>
            mrb3n:x:1000:1000:mrb3n:/home/mrb3n:/bin/bash<br>
            cry0l1t3:x:1001:1001::/home/cry0l1t3:/bin/bash<br>
            htb-student:x:1002:1002::/home/htb-student:/bin/bash
          </h5>

          <p>Another possibility is to exclude specific results. For this, the option "-v" is used with grep. In the next example, we exclude all users who have disabled the standard shell with the name "/bin/false" or "/usr/bin/nologin".</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin"<br>
            <br>
            root:x:0:0:root:/root:/bin/bash<br>
            sync:x:4:65534:sync:/bin:/bin/sync<br>
            postgres:x:111:117:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash<br>
            user6:x:1000:1000:,,,:/home/user6:/bin/bash
          </h5>

          <h4>Cut</h4>

          <p>Specific results with different characters may be separated as delimiters. Here it is handy to know how to remove specific delimiters and show the words on a line in a specified position. One of the tools that can be used for this is cut. Therefore we use the option "-d" and set the delimiter to the colon character (:) and define with the option "-f" the position in the line we want to output.</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin" | cut -d":" -f1<br>
            <br>
            root<br>
            sync<br>
            mrb3n<br>
            cry0l1t3<br>
            htb-student
          </h5>

          <h4>Tr</h4>

          <p>Another possibility to replace certain characters from a line with characters defined by us is the tool tr. As the first option, we define which character we want to replace, and as a second option, we define the character we want to replace it with. In the next example, we replace the colon character with space.
          </p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin" | tr ":" " "<br>
            <br>
            root x 0 0 root /root /bin/bash<br>
            sync x 4 65534 sync /bin /bin/sync<br>
            mrb3n x 1000 1000 mrb3n /home/mrb3n /bin/bash<br>
            cry0l1t3 x 1001 1001 /home/cry0l1t3 /bin/bash<br>
            htb-student x 1002 1002 /home/htb-student /bin/bash
          </h5>

          <h4>Column</h4>

          <p>Since search results can often have an unclear representation, the tool column is well suited to display such results in tabular form using the "-t."</p>
          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin" | tr ":" " " | column -t<br>
            <br>
            root x 0 0 root /root /bin/bash<br>
            sync x 4 65534 sync /bin /bin/sync<br>
            mrb3n x 1000 1000 mrb3n /home/mrb3n /bin/bash<br>
            cry0l1t3 x 1001 1001 /home/cry0l1t3 /bin/bash<br>
            htb-student x 1002 1002 /home/htb-student /bin/bash
          </h5>

          <h4>Awk</h4>

          <p>As we may have noticed, the user "postgres" has one row too many. To keep it as simple as possible to sort out such results, the (g)awk programming is beneficial, which allows us to display the first ($1) and last ($NF) result of the line.</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin" | tr ":" " " | awk '{print $1, $NF}'
            <br>
            <br>
            root /bin/bash<br>
            sync /bin/sync<br>
            mrb3n /bin/bash<br>
            cry0l1t3 /bin/bash<br>
            htb-student /bin/bash
          </h5>

          <h4>Sed</h4>

          <p>There will come moments when we want to change specific names in the whole file or standard input. One of the tools we can use for this is the stream editor called sed. One of the most common uses of this is substituting text. Here, sed looks for patterns we have defined in the form of regular expressions (regex) and replaces them with another pattern that we have also defined. Let us stick to the last results and say we want to replace the word "bin" with "HTB."
          </p>

          <p>The "s" flag at the beginning stands for the substitute command. Then we specify the pattern we want to replace. After the slash (/), we enter the pattern we want to use as a replacement in the third position. Finally, we use the "g" flag, which stands for replacing all matches.</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin" | tr ":" " " | awk '{print $1, $NF}' | sed 's/bin/HTB/g'<br>
            <br>
            root /HTB/bash<br>
            sync /HTB/sync<br>
            mrb3n /HTB/bash<br>
            cry0l1t3 /HTB/bash<br>
            htb-student /HTB/bash
          </h5>

          <h4>Wc</h4>

          <p>Last but not least, it will often be useful to know how many successful matches we have. To avoid counting the lines or characters manually, we can use the tool wc. With the "-l" option, we specify that only the lines are counted.</p>

          <h5>
            kalijester68@htb[/htb]$ cat /etc/passwd | grep -v "false\|nologin" | tr ":" " " | awk '{print $1, $NF}' | wc -l<br>
            <br>
            5
          </h5>

        </div>
        <hr>

        <div id="labs-table">
          <h4><a href="../linuxFundamentals.htm">Linux Fundamentals</a></h4>
          <ol>
            <li><a href="linuxStructure.htm">Linux Structure</a></li>
            <li><a href="linuxDistributions.htm">Linux Distributions</a></li>
            <li><a href="shell.htm">Introduction to Shell</a></li>
            <li><a href="promptDescription.htm">Prompt Description</a></li>
            <li><a href="gettingHelp.htm">Getting Help</a></li>
            <li><a href="systemInformation.htm">System Information</a></li>
            <li><a href="navigation.htm">Navigation</a></li>
            <li><a href="filesDirectories.htm">Working with Files and Directories</a></li>
            <li><a href="editingFiles.htm">Editing Files</a></li>
            <li><a href="findFilesDirectories.htm">Find Files and Directories</a></li>
            <li><a href="redirection.htm">File Description and Redirection</a></li>
            <li><a href="filterContents.htm"><b><em>~ Filter Contents</em></b></a></li>
            <li><a href="regularExpressions.htm">Regular Expressions</a></li>
          </ol>
        </div>
        <hr>

      </div>
    </div>
  </div>

  <div id="footer">
    <p>
      Webpage made by <a href="mailto:kappajester83@gmail.com">Kappa </a>
    </p>
  </div>

</html>